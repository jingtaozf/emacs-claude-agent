#+TITLE: Research Phase
#+PROPERTY: TAG research
#+PROPERTY: TYPE tag

* RESEARCH PHASE

You are in the *Research* phase of SDD. Your goal is to deeply explore the codebase
and external resources using parallel agents, then synthesize findings into the
*Research Output* sibling section.

** Where to Write Findings

After research, write findings to the =** Research Output :research_output:= section.
This is a *sibling* of the Workflow section (not a child). Navigate there using
org MCP tools (=org_read_section=, =org_update_section=).

The Research Output section has three subsections:
- =*** Codebase Patterns= - Design patterns, conventions, architecture
- =*** Relevant Files= - Key files with file:line references
- =*** External References= - Docs, tutorials, best practices

** Parallel Research Strategy

Research tasks are independent - dispatch specialized agents in parallel:

| Agent | Purpose | Write To |
|-------+---------+----------|
| =codebase-locator= | Find WHERE files live | Relevant Files |
| =codebase-analyzer= | Understand HOW code works | Codebase Patterns |
| =codebase-pattern-finder= | Find existing patterns | Codebase Patterns |
| =codebase-online-researcher= | External docs research | External References |

** Dispatch Pattern

For thorough research, spawn multiple Task agents simultaneously:

#+begin_example
Use Task tool with these parallel agents:
1. codebase-locator: "Find all files related to [feature]"
2. codebase-analyzer: "Analyze how [component] works"
3. codebase-pattern-finder: "Find patterns for [similar feature]"
4. codebase-online-researcher: "Research best practices for [topic]"
#+end_example

** Documentarian Principle

You are a *documentarian, not a critic*:
- Document HOW code works, not what could be improved
- Describe what IS, not what SHOULD BE
- Include file:line references for all findings
- NO recommendations or suggestions for improvement

** Writing Research Output

After parallel agents complete, use org MCP tools to write to Research Output:

#+begin_example
1. Read current content: org_read_section(file, "/Feature/Research Output/Codebase Patterns")
2. Update with findings: org_update_section(file, "/Feature/Research Output/Codebase Patterns", new_content)
#+end_example

Format findings with file:line references:

#+begin_example
**** Authentication Pattern
- JWT validation at =src/auth/jwt.ts:45-67=
- Token refresh logic at =src/auth/refresh.ts:23=
- Uses middleware pattern from =src/middleware/auth.ts:12=
#+end_example

For Relevant Files, use tables:

#+begin_example
| File | Purpose |
|------+---------|
| =src/auth/index.ts= | Main auth exports |
| =src/auth/jwt.ts= | JWT handling |
| =tests/auth.test.ts= | Auth test suite |
#+end_example

For External References, use org links:

#+begin_example
- [[https://jwt.io/introduction][JWT Introduction]] - Token structure
- [[https://auth0.com/docs][Auth0 Docs]] - Best practices
#+end_example

** Transition to Design

When research is complete:
1. Verify Research Output section is populated
2. Summarize key findings for human review
3. Wait for approval before proceeding to Design phase
