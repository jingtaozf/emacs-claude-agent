#+TITLE: Implementation Phase
#+PROPERTY: TAG implementation
#+PROPERTY: TYPE tag

* Summary
:PROPERTIES:
:CUSTOM_ID: tags-implementation-summary
:END:

| Property | Value |
|----------+-------|
| Tag | =:implementation:= |
| Purpose | Implement features one at a time using TDD |
| Output | Mark TODOs as DONE in Features section |

*CRITICAL*: Implement ONE feature, then STOP. Wait for user confirmation before next.

Full instructions: [[file:docs/prompts/tags/implementation.org::*Details][Read Details]]

* Details
:PROPERTIES:
:CUSTOM_ID: tags-implementation-details
:END:

You are in the *Implementation* phase of SDD. Your goal is to implement features
one at a time, following TDD principles and marking TODOs as DONE upon completion.

** Atomic Implementation Rule

*CRITICAL*: Implement ONE feature at a time, then STOP.

1. Find the first incomplete TODO in Features section
2. Implement ONLY that feature
3. Write tests for that feature
4. Mark TODO as DONE using org-todo
5. STOP and report completion

Do NOT proceed to the next feature without user confirmation.

** Before Starting

Check these sections:

1. *Spec*: Review Technical Design for implementation details
2. *Research Output*: Find patterns to follow in Codebase Patterns
3. *Features*: Locate the first incomplete TODO

** TDD Workflow

For each feature:

1. *Write test first*: Define expected behavior
2. *Run test*: Verify it fails (red)
3. *Implement*: Minimal code to pass
4. *Run test*: Verify it passes (green)
5. *Refactor*: Clean up while tests pass
6. *Commit*: Save progress

** Implementation Checklist

Before marking a feature DONE:

- [ ] Tests written and passing
- [ ] Code follows patterns from Research Output
- [ ] Matches Technical Design in Spec
- [ ] No unhandled edge cases
- [ ] Code is clean and readable

** Marking Features Complete

Use org-todo to mark features:

#+begin_example
Before: *** TODO Create auth middleware skeleton
After:  *** DONE Create auth middleware skeleton
#+end_example

You can use =C-c C-t= in Emacs or update via MCP org tools.

** Context Window Management

Monitor your context usage:
- If context exceeds 60%, STOP
- Summarize progress in current feature
- Report what remains to be done
- Let user decide whether to continue or restart

** Anti-Patterns to Avoid

| Don't | Do |
|-------+----|
| Implement multiple features at once | One feature, then stop |
| Skip tests | TDD - tests first |
| Ignore existing patterns | Follow Codebase Patterns |
| Rush through implementation | Quality over speed |
| Forget to mark DONE | Update org-todo state |

** Completion Report

After implementing a feature:

#+begin_example
*Feature Completed*: [feature name]

*Files Changed*:
- =path/to/file.ts= - [what changed]
- =path/to/test.ts= - [tests added]

*Tests*: X passing, 0 failing

*Next Feature*: [name of next TODO]

Ready to proceed? (y/n)
#+end_example

** Quality Gates

Before marking a feature DONE, verify:

- [ ] Tests written and passing
- [ ] No regressions in existing tests
- [ ] Code follows existing patterns (from Research Output)
- [ ] Matches Technical Design in Spec
- [ ] Security considerations addressed (input validation, auth, injection)

** Debugging Workflow

When encountering failures:

1. *Capture*: Error message, stack trace, reproduction steps
2. *Isolate*: Find the failure location
3. *Hypothesize*: Form and test theories
4. *Fix*: Minimal change to resolve the issue
5. *Verify*: Ensure fix works and no regressions
6. *Prevent*: Consider if similar bugs exist elsewhere

Provide for each issue:
- Root cause explanation with evidence
- Suggested fix with =file:line= references
- Testing approach to verify

** Code Review Checklist

Self-review before marking DONE:

| Category | Check |
|----------+-------|
| Logic | No obvious bugs, null handling, edge cases |
| Security | No injection, proper auth, no exposed secrets |
| Patterns | Follows existing codebase conventions |
| Tests | Happy path + edge cases + error conditions |
| Clean | No dead code, good naming, minimal changes |

** Commit Strategy

After completing a feature:
1. Stage related changes: =git add=
2. Write semantic commit message explaining *why*
3. Verify clean state: =git status=
4. Do NOT push unless explicitly asked

** Context Window Management

Monitor your context usage:
- If context exceeds 60%, STOP
- Summarize progress in current feature
- Write handoff notes for session continuity
- Report what remains to be done

** Session Continuity

If resuming a session:
1. Check Features section for progress (DONE vs TODO)
2. Review last completed feature
3. Find next incomplete TODO
4. Continue from there
