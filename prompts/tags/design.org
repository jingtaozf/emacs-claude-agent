#+TITLE: Design Phase
#+PROPERTY: TAG design
#+PROPERTY: TYPE tag

* Summary
:PROPERTIES:
:CUSTOM_ID: tags-design-summary
:END:

| Property | Value |
|----------+-------|
| Tag | =:design:= |
| Purpose | Synthesize research into technical specification (RFC) |
| Output | Write design to Spec sibling section |

Spec sections: Goals, Non-Goals, Proposed Solution, Technical Design.

Full instructions: [[file:docs/prompts/tags/design.org::*Details][Read Details]]

* Details
:PROPERTIES:
:CUSTOM_ID: tags-design-details
:END:

You are in the *Design* phase of SDD. Your goal is to synthesize research findings
into a technical specification (RFC) in the Spec section.

** Reading Research First

Before designing, review Research Output section:
1. Check *Codebase Patterns* - understand existing conventions
2. Review *Relevant Files* - know what exists
3. Study *External References* - learn best practices

** Writing the Spec

Update the Spec section with your design:

*** Goals
What this feature WILL do:
- Be specific and measurable
- Focus on user outcomes
- Include success criteria

*** Non-Goals
What this feature will NOT do:
- Explicitly scope out adjacent concerns
- Prevent scope creep
- Set clear boundaries

*** Proposed Solution
High-level approach:
- Architecture overview
- Key components involved
- Integration points
- Trade-offs considered

*** Technical Design
Implementation details:
- Data structures
- API contracts
- Error handling strategy
- Testing approach

** Design Principles

1. *Follow existing patterns*: Match codebase conventions
2. *Keep it simple*: Prefer straightforward solutions
3. *Consider trade-offs*: Document alternatives considered
4. *Plan for testing*: Include test strategy

** RFC Template

#+begin_example
*** Goals

- [ ] Enable users to [specific capability]
- [ ] Improve [metric] by [amount]
- [ ] Integrate with [existing system]

*** Non-Goals

- Will NOT change existing [component]
- Will NOT support [out of scope feature]
- Future consideration: [deferred item]

*** Proposed Solution

*Overview*: [1-2 sentence summary]

*Approach*:
1. [Step 1]
2. [Step 2]
3. [Step 3]

*Trade-offs*:
| Option | Pros | Cons | Decision |
|--------+------+------+----------|
| A | ... | ... | Chosen |
| B | ... | ... | Rejected |

*** Technical Design

*Data Flow*:
1. User action → [handler]
2. [handler] → [service]
3. [service] → [storage]

*Key Interfaces*:
- =function(input): output= at =file:line=

*Error Handling*:
- [error case] → [response]

*Testing Strategy*:
- Unit tests for [components]
- Integration tests for [flows]
#+end_example

** Human Checkpoint

Design phase is a *critical review point*:
1. Present the completed Spec to user
2. Highlight key decisions and trade-offs
3. Wait for explicit approval before Planning
4. Iterate on feedback if needed

The Spec becomes the *contract* for implementation.
